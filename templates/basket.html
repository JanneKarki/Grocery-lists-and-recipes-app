{% extends "layout.html" %}

{% block content %}


<h1>Shopping list</h1>
<table>
<tr>
<th>Product</th>

<th >Amount</th>

<th >Unit</th>
</tr>
</table>

<table>
  
    {% for entry in basket %}
    
    <tr>
      <td><input id="ingredient" name="ingredient" type="text" value = {{ entry[0] }} ></td>

      <td><input id="amount" name="amount" type="text" ></td>

      
        <td><select name="unit" id="unit">
        <option val=""></option>
        <option val="kg">kg</option>
        <option val="g">g</option>
        <option val="dl">dl</option>
        <option val="l">l</option>
        <option val="tl">tl</option>
        <option val="rkl">rkl</option>
        <option val="kpl">kpl</option>
        </select></td>
    </tr>
        {% endfor %}  
    <br>


</table> 

<br>
<br>
<br>
<form action="/basket" method="POST" onsubmit="get_inputs()">
Name: <input type="text" name="name" minlength="1" maxlength="30">
<input type="submit" value="Save list">
<input type="hidden" name="lines" id="lines" value="tre">


</form>
      

  <script type="text/javascript">
    var i=0;
    

    function get_inputs(){
      var ingredients = document.querySelectorAll("#ingredient");
      var amounts = document.querySelectorAll("#amount");
      var units = document.querySelectorAll("#unit");

      
      
      var string = ""
      for(var i = 0; i<ingredients.length; i++){
           
           var ingredient = ingredients[i].value;
           amount = amounts[i].value;
           unit = units[i].value;

          if (ingredient.length === 0 || amount.length === 0 || unit.length === 0){
            alert("Empty input" + i)
            break
          }


           string += ingredient + " " + amount + " " + unit + " "
           
           
       }

      
      document.getElementById('lines').value = string
       
      return string;

    }
  </script>
{% endblock %}