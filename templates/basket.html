{% extends "layout.html" %}

{% block content %}


<h1>Shopping list</h1>
<table>
<tr>
<th>Product</th>

<th >Amount</th>

<th >Unit</th>
</tr>
</table>

<table>
  
    {% for entry in basket %}
    
    <tr>
      <td><input id="ingredient" name="ingredient" type="text" value = {{ entry[0] }} ></td>

      <td><input id="amount" name="amount" type="text" ></td>

      
        <td><select name="unit" id="unit">
        <option val="">Unit</option>
        <option val="1">kg</option>
        <option val="2">g</option>
        <option val="3">dl</option>
        <option val="4">l</option>
        <option val="5">tl</option>
        <option val="6">rkl</option>
        <option val="7">kpl</option>
        </select></td>
    </tr>
        {% endfor %}  
    <br>


</table> 

<form action="/basket" method="POST" onsubmit="get_inputs()">
<input type="submit" value="Save list">
<input type="hidden" name="lines" id="lines" value="tre">

<br>
<br>
<br>

Name: <input type="text" name="name" minlength="1" maxlength="30">

<input type="button" value="Save list" onclick="get_inputs()">

</form>
      

  <script type="text/javascript">
    var i=0;
    

    function get_inputs(){
      var ingredients = document.querySelectorAll("#ingredient");
      var amounts = document.querySelectorAll("#amount");
      var units = document.querySelectorAll("#unit");
      
      var string = ""
      for(var i = 0; i<ingredients.length; i++){
           
           ingredient = ingredients[i].value;
           amount = amounts[i].value;
           unit = units[i].value;
           string += ingredient + " " + amount + " " + unit + " "
           
           
       }

      
      document.getElementById('lines').value = string
       
      return string;

    }
  </script>
{% endblock %}